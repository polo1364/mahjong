# 台灣16張麻將（明星3缺1規則）

完整實作台灣16張麻將遊戲，支援手機與電腦瀏覽器，畫面精美、功能完整。

## 遊戲特色

本遊戲完整實作台灣16張麻將規則（明星3缺1玩法），包含以下特色：

### 自動摸牌機制

遊戲採用自動摸牌設計，輪到玩家時會自動摸牌，避免玩家忘記摸牌而造成相公（牌數不對）的情況。玩家只需專注於出牌策略，不需手動按摸牌按鈕。

### 擲骰決定莊家

遊戲開始時會擲兩個骰子決定莊家位置，完全符合正規麻將規則。擲骰結果會顯示在戰況記錄中，例如「擲骰：2 + 5 = 7，莊家為西家」。

### 完整四圈制度

遊戲採用正規的四圈制度（東圈、南圈、西圈、北圈），每圈四局共16局。莊家輪替與連莊規則如下：

- **莊家胡牌**：莊家繼續當莊（連莊）
- **流局（牌山枯竭）**：莊家繼續當莊（連莊）
- **閑家胡牌**：莊家輪替至下一家
- **四圈打完**：遊戲結束，顯示最終成績

連莊時戰況記錄會顯示「莊家胡牌，繼續當莊」或「流局連莊，莊家繼續當莊」。

### 海底牌規則

遊戲採用正規的海底牌規則：

- **基本海底**：牌山最後保留16張牌作為海底，不可摸取
- **槓牌增加**：每槓一次牌，海底多保留1張（16 + 槓牌次數）
- **流局條件**：當牌山被摸完（剩餘海底牌），無人胡牌則流局
- **剩餘牌數**：畫面顯示的「剩餘牌」是扣除海底後可摸的牌數

例如：開局時總共144張牌，發牌後剩餘約80張，扣除16張海底，顯示「剩餘牌：64」。若有玩家槓牌，海底會增加到17張，可摸牌數相應減少。

### 破產機制

當任何玩家分數歸零或變成負數時，遊戲立即結束並顯示最終成績排名。系統會自動計算所有玩家的名次並顯示獎牌（🥇🥈🥉）。

### 完整遊戲規則

遊戲採用正規台灣16張麻將規則，**莊家開局時拿17張牌，直接出牌**；其他玩家拿16張牌，輪到時自動摸牌至17張再出牌。支援一般型胡牌（5組面子+1對將）和七對子兩種胡牌型態。

### 花牌處理機制

遊戲保留王牌專門用於花牌和槓牌的補牌。當玩家摸到花牌時，該花牌會自動移至花牌區，並從王牌尾端補一張牌。若補到的牌仍是花牌，會繼續補牌直到補到非花牌為止。發牌完成後也會自動處理手牌中的花牌並補牌。

### 碰牌與槓牌

當其他玩家出牌時，若您手中有兩張相同的牌可以碰，或三張相同的牌可以槓，系統會彈出選擇面板讓您決定是否進行操作。槓牌後會從王牌補一張牌，實現「槓上開花」機制。每次槓牌會使海底牌增加1張。

### 台數計算系統

遊戲包含完整的台數計算，支援自摸、門清自摸、對對胡、七對子、混一色、清一色、花牌、金牌等多種台型。胡牌時會自動計算台數並結算金額。

### 金牌系統

遊戲支援金牌玩法（可選）。開局時會隨機指定3張牌作為金牌，金牌可以當作萬用牌使用，並且額外增加台數。金牌會以金色顯示並有發光動畫效果。

### 智能AI對手

AI對手會根據向聽數（距離聽牌的步數）和風險評估來選擇最佳出牌策略，提供良好的遊戲體驗。AI也會判斷是否要碰牌或槓牌。

## 視覺設計

遊戲採用深藍色漸層背景營造專業麻將桌氛圍，所有元素都加入陰影與立體感效果。牌面設計精美，白色漸層底色，金牌有金色漸層與脈動發光動畫。牌面懸停時會上浮並產生脈動動畫，按鈕使用漸層、陰影和懸停效果，提升互動體驗。

## 響應式設計

遊戲完美適配手機與電腦螢幕，針對480px、768px等斷點進行優化。觸控友好設計，移除點擊高亮效果。自適應佈局，手牌、按鈕等元素會根據螢幕大小自動調整。在小螢幕上自動縮小字體和牌面尺寸。

## 使用方式

直接用瀏覽器開啟 `index.html` 即可開始遊戲，無需安裝任何軟體。遊戲為純前端實作，可離線遊玩。

### 操作說明

遊戲操作簡單直覺：

1. **開始新局**：點擊「開始新局」按鈕，系統會擲骰決定莊家並開始遊戲，可選擇是否啟用金牌
2. **自動摸牌**：輪到您時，系統會自動摸牌，無需手動操作
3. **出牌**：點擊手牌中要打出的牌即可出牌
4. **碰牌/槓牌**：當可以碰或槓時會自動彈出選擇面板，點擊對應按鈕或「過」
5. **胡牌**：當可以胡牌時會自動彈出胡牌按鈕，點擊即可胡牌並結算

### 遊戲流程

正確的遊戲流程如下：

1. **開始新局** → 擲骰決定莊家 → 發牌（莊家17張，其他玩家16張）
2. **處理花牌** → 若有花牌，從王牌補牌
3. **莊家出牌** → 莊家直接出一張牌（已有17張，不用摸牌）
4. **輪流摸牌出牌** → 其他玩家依序自動摸牌、出牌
5. **碰牌/槓牌** → 可選擇碰牌或槓牌
6. **胡牌或流局** → 符合胡牌條件時可以胡牌，或牌山枯竭流局
7. **結算** → 計算台數並結算金額
8. **連莊或輪替** → 莊家胡牌或流局則連莊，閑家胡牌則莊家輪替
9. **繼續對局** → 開始下一局，直到四圈打完或有人破產
10. **最終成績** → 顯示排名並可重新開始

### 連莊規則

遊戲採用正規台灣麻將的連莊規則：

- **莊家胡牌**：莊家繼續當莊，不輪替
- **流局（牌山枯竭）**：莊家繼續當莊，不輪替
- **閑家胡牌**：莊家輪替至下一家（東→南→西→北→東）

連莊時會在戰況記錄中顯示相應訊息，讓玩家清楚了解莊家狀態。

### 遊戲結束條件

遊戲會在以下情況結束：

- **四圈打完**：完成東南西北四圈共16局
- **玩家破產**：任何玩家分數歸零或變成負數

遊戲結束時會顯示最終成績排名，點擊「開始新局」可重新開始遊戲。

## 技術特點

遊戲使用純HTML、CSS、JavaScript實作，無需任何外部依賴。採用現代化的ES6+語法，程式碼結構清晰易懂。完整的遊戲邏輯包含向聽數計算、AI決策、台數計算等複雜演算法。

## 系統需求

任何現代瀏覽器（Chrome、Firefox、Safari、Edge等）均可運行，支援桌面與行動裝置。建議使用最新版本瀏覽器以獲得最佳體驗。

## 開發資訊

- **版本**：4.0
- **開發日期**：2025-10-20
- **授權**：MIT License

---

祝您遊戲愉快！🀄🎉

